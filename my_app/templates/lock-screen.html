{% extends 'layout/auth_base.html' %} 
{% load static %}
{% block content %}
<!-- Start Main Content Area -->
<div class="container">
	<div class="main-content d-flex flex-column p-0">
		<div class="m-auto m-1230">
			<form method="post" style="max-width: 550px">
				{% csrf_token %}
				<div class="card bg-primary bg-opacity-10 border-0 rounded-0 rounded-top-3 position-relative">
					<div class="card-body p-4 pb-5 my-2">
						<div class="mw-350 text-center">
							<h3 class="text-primary fw-semibold fs-20 mb-2">
								<i class="ri-lock-line"></i> Screen Locked
							</h3>
							<p class="text-primary fs-15">
								Please enter your password to unlock and continue using the application.
							</p>
						</div>
					</div>
				</div>
				<div class="card bg-white border-0 rounded-bottom-3 mb-4">
					<div class="card-body p-4">
						<div class="text-center">
							{% if user.profile.profile_picture %}
								<img src="{{ user.profile.profile_picture.url }}" 
								     class="wh-55 border border-2 border-color-white rounded-circle"
								     style="box-shadow: 0px 4px 15px 0px rgba(82, 150, 212, 0.08);"
								     alt="{{ user.get_full_name|default:user.username }}">
							{% else %}
								<img src="{% static 'images/user-default.png' %}" 
								     class="wh-55 border border-2 border-color-white rounded-circle"
								     style="box-shadow: 0px 4px 15px 0px rgba(82, 150, 212, 0.08);"
								     alt="{{ user.get_full_name|default:user.username }}">
							{% endif %}
							<h4 class="fs-18 fw-semibold text-primary mt-3 mb-1">
								{{ user.get_full_name|default:user.username }}
							</h4>
							<p class="text-gray-light fs-14 mb-0">{{ user.email }}</p>
						</div>
						
						{% if error %}
						<div class="alert alert-danger alert-dismissible fade show mt-3" role="alert">
							<i class="ri-error-warning-line"></i> {{ error }}
							<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
						</div>
						{% endif %}
						
						<div class="row">
							<div class="col-lg-12">
								<div class="form-group mb-4">
									<label class="label text-secondary fs-14">Password</label>
									<input 
										type="password" 
										name="password" 
										class="form-control h-55 text-dark" 
										placeholder="Enter your password"
										required
										autocomplete="current-password"
									>
								</div>
								<div class="form-group mb-4">
									<button 
										type="submit" 
										class="btn btn-primary fs-16 fw-semibold text-white py-2 px-4 w-100"
									>
										<i class="ri-lock-unlock-line"></i> Unlock Screen
									</button>
								</div>
								<div class="form-group text-center">
									<a href="{% url 'logout' %}" class="text-decoration-none text-primary fs-14">
										<i class="ri-logout-circle-line"></i> Sign out instead
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
<!-- End Main Content Area -->

<script>
// Auto focus on password field
document.addEventListener('DOMContentLoaded', function() {
    const passwordField = document.querySelector('input[name="password"]');
    if (passwordField) {
        passwordField.focus();
    }
});

// Handle Enter key press
document.querySelector('input[name="password"]').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        e.preventDefault();
        document.querySelector('form').submit();
    }
});
</script>
{% endblock %}
